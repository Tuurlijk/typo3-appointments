config.tx_extbase {
	persistence.classes {
		Tx_Appointments_Domain_Model_Appointment {
			mapping.columns {
				crdate.mapOnProperty = crdate
			}
		}
		Tx_Appointments_Domain_Model_Address {
			mapping.columns {
				tx_appointments_social_security_number.mapOnProperty = socialSecurityNumber
				tx_appointments_creation_progress.mapOnProperty = creation_progress
			}
		}
		Tx_Appointments_Domain_Model_FormField {
			mapping.columns {
				sorting.mapOnProperty = sorting
			}
		}
	} 
	
	# this override method is global and fails once when cache is cleared (4.7.8), so I can not depend on it
	#objects {
		# keep this in mind for when I require it for a property that isn't somewhere deep down another property
		#Tx_Extbase_Validation_ValidatorResolver {
		#	className = Tx_Appointments_Validation_VariableValidatorResolver
		#}
	#}
}

plugin.tx_appointments {
	view {
		templateRootPath = {$plugin.tx_appointments.view.templateRootPath}
		partialRootPath = {$plugin.tx_appointments.view.partialRootPath}
		layoutRootPath = {$plugin.tx_appointments.view.layoutRootPath}
	}
	persistence {
		storagePid = {$plugin.tx_appointments.persistence.storagePid}
		classes {
			Tx_Appointments_Domain_Model_Address {
				mapping {
					tableName = tt_address
					recordType = Tx_Appointments_Domain_Model_Address
				}
			}
		}
	}
	jslib {
		jQuery.external = 1
		jQuery = {$plugin.tx_appointments.js.jQueryCDN}
		#TYPO3 4.6.0, http://forge.typo3.org/issues/29695 resolved? Clearly not, so for now:
		jQuery.disableCompression = 1
		
		jQueryUI.external = 0
		jQueryUI = {$plugin.tx_appointments.js.uiLibFile}
		jQueryUI.disableCompression = 1
		jQueryUIcss.external = 0
		jQueryUIcss = {$plugin.tx_appointments.js.uiCssFile}
		jQueryUIcss.disableCompression = 1
		
		inlineJS = TEMPLATE
		inlineJS.template = FILE
		inlineJS.template.file = {$plugin.tx_appointments.js.libFile}
		inlineJS.marks {
			DAY1 = TEXT
			DAY1.insertData = 1
			DAY1.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s1}
			DAY2 = TEXT
			DAY2.insertData = 1
			DAY2.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s2}
			DAY3 = TEXT
			DAY3.insertData = 1
			DAY3.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s3}
			DAY4 = TEXT
			DAY4.insertData = 1
			DAY4.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s4}
			DAY5 = TEXT
			DAY5.insertData = 1
			DAY5.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s5}
			DAY6 = TEXT
			DAY6.insertData = 1
			DAY6.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s6}
			DAY7 = TEXT
			DAY7.insertData = 1
			DAY7.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_list.day_s7}
			MON1 = TEXT
			MON1.insertData = 1
			MON1.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s1}
			MON2 = TEXT
			MON2.insertData = 1
			MON2.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s2}
			MON3 = TEXT
			MON3.insertData = 1
			MON3.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s3}
			MON4 = TEXT
			MON4.insertData = 1
			MON4.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s4}
			MON5 = TEXT
			MON5.insertData = 1
			MON5.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s5}
			MON6 = TEXT
			MON6.insertData = 1
			MON6.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s6}
			MON7 = TEXT
			MON7.insertData = 1
			MON7.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s7}
			MON8 = TEXT
			MON8.insertData = 1
			MON8.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s8}
			MON9 = TEXT
			MON9.insertData = 1
			MON9.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s9}
			MON10 = TEXT
			MON10.insertData = 1
			MON10.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s10}
			MON11 = TEXT
			MON11.insertData = 1
			MON11.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s11}
			MON12 = TEXT
			MON12.insertData = 1
			MON12.value = {LLL:EXT:appointments/Resources/Private/Language/locallang.xml:tx_appointments_agenda.month_s12}
		}
	}
	settings {
		agendaUid = {$plugin.tx_appointments.settings.agendaUid}
		appointmentTypeList = {$plugin.tx_appointments.settings.appointmentTypeList}
		agendaBack = {$plugin.tx_appointments.settings.agendaBack}
		agendaForward = {$plugin.tx_appointments.settings.agendaForward}
		agendaWeeksBeforeCurrent = {$plugin.tx_appointments.settings.agendaWeeksBeforeCurrent}
		agendaWeeksAfterCurrent = {$plugin.tx_appointments.settings.agendaWeeksAfterCurrent}
		freeSlotInMinutes = {$plugin.tx_appointments.settings.freeSlotInMinutes}
		suGroup = {$plugin.tx_appointments.settings.suGroup}
	}
	tsOverride {
		checkFields = agendaUid,appointmentTypeList,suGroup
		selectFields = agendaNavOverride
	}
	features {
		# need to test this at some point
		#rewrittenPropertyMapper = 1
	}
}

[globalVar = LIT:0 < {$plugin.tx_appointments.js.includeJquery}] && [globalVar = LIT:0 < {$plugin.tx_appointments.js.toFooter}] 
page.includeJSFooterlibs.appointments_jQuery < plugin.tx_appointments.jslib.jQuery

[globalVar = LIT:0 < {$plugin.tx_appointments.js.includeJquery}] && [globalVar = LIT:1 > {$plugin.tx_appointments.js.toFooter}] 
page.includeJSlibs.appointments_jQuery < plugin.tx_appointments.jslib.jQuery

[globalVar = LIT:0 < {$plugin.tx_appointments.js.includeJqueryUI}] && [globalVar = LIT:0 < {$plugin.tx_appointments.js.toFooter}] 
page.includeJSFooterlibs.appointments_jQueryUI < plugin.tx_appointments.jslib.jQueryUI
page.includeCSS.appointments_jQueryUI < plugin.tx_appointments.jslib.jQueryUIcss

[globalVar = LIT:0 < {$plugin.tx_appointments.js.includeJqueryUI}] && [globalVar = LIT:1 > {$plugin.tx_appointments.js.toFooter}] 
page.includeJSlibs.appointments_jQueryUI < plugin.tx_appointments.jslib.jQueryUI
page.includeCSS.appointments_jQueryUI < plugin.tx_appointments.jslib.jQueryUIcss

[globalVar = LIT:0 < {$plugin.tx_appointments.js.includeJS}] && [globalVar = LIT:0 < {$plugin.tx_appointments.js.toFooter}]
page.jsFooterInline.198311210 < plugin.tx_appointments.jslib.inlineJS

[globalVar = LIT:0 < {$plugin.tx_appointments.js.includeJS}] && [globalVar = LIT:1 > {$plugin.tx_appointments.js.toFooter}]
page.jsInline.198311210 < plugin.tx_appointments.jslib.inlineJS
[global]

plugin.tx_appointments._CSS_DEFAULT_STYLE (
	.tx-appointments .f3-form-error {
		background-color:#ff9f9f !important;
		border:1px #f00 solid !important;
	}
	
	.tx-appointments {
		font-family:helvetica,arial,sans-serif;
	}
	
	.tx-appointments table caption {
		display:none;
	}
	
	.tx-appointments table {
		border-collapse:separate;
		border-spacing:5px;
	}

	.tx-appointments table th {
		font-weight:bold;
		text-align:center;
	}

	.tx-appointments table td {
		vertical-align:top;
	}
	
	.tx-appointments a {
		color:#66f;
		text-decoration:none;
	}
	.tx-appointments a:hover,
	.tx-appointments a:focus,
	.tx-appointments a:active {
		color:#f22;
	}
	
	
	/* List */
	
	.tx-appointments .appointmentList .link_appointment {
		font-size:0.9em;
	}
	
	
	/* Agenda */
	
	.tx-appointments .agendaBar {
		border:2px solid #ddd;
		text-align:center;
		font-size:1.3em;
		position:relative;
		font-weight:bold;
		padding:10px 0;
		width:99.5%;
		height:25px;
		background-color:#fafafa;
	}
	
	.tx-appointments .button_agendaBack {
		left:15px;
	}
	
	.tx-appointments .button_agendaForward {
		right:15px;
	}
	
	.tx-appointments .button_agendaBack,
	.tx-appointments .button_agendaForward {
		position:absolute;
		top:13px;
		font-size:0.8em;
		font-weight:normal;
	}
	
	.tx-appointments .agendaShow {
		width:100%;
	}
	
	.tx-appointments .button_agendaBack:before {
		content:"\2190\0000a0";
	}
	
	.tx-appointments .button_agendaForward:after {
		content:"\0000a0\2192";
	}
	
	.tx-appointments .agendaShow th {
		background-color:#e9e9e9;
		font-size:0.9em;
	}
	
	.tx-appointments .agendaShow td {
		background-color:#e9e9e9;
		padding:5px;
		height:90px;
		width:14%;
	}
	
	.tx-appointments .agendaShow .agendaDay {
		background-color:#f6f6f6;
		border:1px solid #e9e9e9;
	}
	
	.tx-appointments .agendaShow .agendaDay.current,
	.tx-appointments .agendaShow .agendaDay.current.holiday {
		background-color:#ffc;
	}
	
	.tx-appointments .agendaShow .agendaDay.holiday {
		background-color:#fee;
	}
	
	.tx-appointments .agendaShow .agendaDay.current.holiday {
		border:1px solid #fdd;
	}
	
	.tx-appointments .agendaDay .dayBar {
		background-color:#f9f9f9;
		text-align:right;
		color:#555;
		overflow:hidden;
		font-size:0.9em;
		font-weight:bold;
		padding-right:3px;
		text-transform:lowercase;
	}
	
	.tx-appointments .agendaDay .dayBar a {
		color: #555;
	}
	
	.tx-appointments .agendaShow .link_appointment {
		font-size:0.8em;
	}


	/* Buttons */
	
	.tx-appointments .button_new,
	.tx-appointments .button_edit,
	.tx-appointments .button_delete,
	.tx-appointments .button_back {
		font-size:1.1em;
		display:inline-block;
	}
	.tx-appointments .button_edit,
	.tx-appointments .button_delete {
		margin-left:15px;
	}
	
	.tx-appointments .csh {
		overflow:hidden;
		width:16px;
		height:18px;
		display:inline-block;
		position:absolute;
		margin-left:8px;
	}
	
	.tx-appointments .tooltip {
		position:absolute;
		display:inline-block;
		opacity:0.85;
		background-color:#000;
		border:1px solid #555;
		color:#fff;
		font-size:0.9em;
		max-width:240px;
		margin-left:32px;
		padding:3px 5px;
		z-index:999;
	}
	
	.tx-appointments .button_new:before,
	.tx-appointments .button_edit:before,
	.tx-appointments .button_delete:before,
	.tx-appointments .button_back:before,
	.tx-appointments .csh:before,
	.tx-appointments .agendaDay .dayBar a:before {
		background-image:url("/typo3conf/ext/appointments/Resources/Public/Icons/t3skin.png");
		content:"";
		float:left;
		height:16px;
		width:16px;
		margin:2px 8px 0 0;
	}
	
	.tx-appointments .button_new:before,
	.tx-appointments .agendaDay .dayBar a:before {
		background-position:-180px 0;	
	}
	.tx-appointments .button_edit:before {
		background-position:-198px 0;
	}
	.tx-appointments .button_delete:before {
		background-position:-162px -18px;
	}
	.tx-appointments .button_back:before {
		background-position:-18px -36px;
	}
	.tx-appointments .csh:before {
		background-position:-306px -54px;
	}
	
	.tx-appointments .button_delete .delete_confirm_text {
		display:none;
	}
	
	
	/* Forms */
	
	.tx-appointments span.warnUnload {
		display:none;
	}
	.tx-appointments .submit {
		background-color:#ccc;
		border:1px solid #999;
	}
	.tx-appointments .submit.next {
		font-weight:bold;
	}
	.tx-appointments textarea,
	.tx-appointments .textinput { 
		width:500px;
	}
	.tx-appointments textarea,
	.tx-appointments .textinput,
	.tx-appointments .select,
	.tx-appointments .checkbox { 
		border:1px solid #c2c2c1;
		background-color:#fafaf5;
	}
	.tx-appointments .textinput.datepicker {
		width:90px;
	}
	.tx-appointments fieldset {
		border:0;
	}
	.tx-appointments .required {
		color:#f00;
	}
	
	
	/* Reservation timer */
	
	@keyframes flashTimer {
		0% { color:#000; }
		50% { color:#f00; }
	}
	
	.tx-appointments span.reservation-timer.flash {
		animation:flashTimer linear 1s infinite;
	}
)